# MCS ShiftBot

Telegram-бот для управления сменами MSC Baltic.

## Требования
- Python 3.11+
- Токен Telegram-бота
- Доступ к Google Sheets с правами редактирования (сервисный аккаунт)

## Подготовка окружения
1. Клонируйте репозиторий и перейдите в каталог проекта.
2. Создайте виртуальное окружение (опционально) и установите зависимости:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
3. Сохраните JSON-файл сервисного аккаунта Google в корне проекта (по умолчанию ожидается `service_account.json`).
4. Выдайте сервисному аккаунту права «Редактор» для таблицы Google: `https://docs.google.com/spreadsheets/d/1Hen1og8dtPl0L_zeBqSTZBXOpr0KJ0T2BKVbu5Ae2FM/edit`.
5. Скопируйте файл `.env.example` и заполните его своими значениями (или экспортируйте переменные вручную):
   ```bash
   cp .env.example .env
   # Отредактируйте .env и впишите токен бота, путь к JSON и ID таблицы
   ```

## Запуск бота
1. При первом запуске удобно воспользоваться скриптом, который подхватывает значения из `.env`:
   ```bash
   ./scripts/run_bot.sh
   ```
   Скрипт автоматически загрузит переменные окружения из `.env` и запустит `python bot_shift.py`.
2. При желании можно стартовать бот напрямую:
   ```bash
   python bot_shift.py
   ```
3. Убедитесь, что бот запущен (в логе появится сообщение `Bot polling is started`).
4. Откройте диалог с ботом @MSCShiftBot в Telegram и выполните /start.

## Полезные советы
- При первом запуске рекомендуется пройти полный сценарий регистрации и создать тестовую смену, чтобы проверить корректность доступа к таблице.
- Для отладки сетевого взаимодействия с Google API можно установить переменную `LOG_LEVEL=DEBUG` и переопределить уровень логгера в `bot_shift.py`.
- Если необходимо изменить названия листов или колонок, редактируйте соответствующие константы и методы в `src/sheets_service.py`.

